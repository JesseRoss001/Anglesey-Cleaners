{% extends "users/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container">
    <h2>Set Your Availability</h2>
    <form method="post" id="availability-form">
        {% csrf_token %}
        {% for date, form in forms %}
        <div class="card">
            <div class="card-header">
                {{ date|date:"F d, Y" }}
            </div>
            <div class="card-body">
                <input type="hidden" name="{{ form.prefix }}-date" value="{{ date }}">
                {{ form.timeslot }}
                <label>Notes:</label>
                {{ form.notes }}
            </div>
        </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Submit Availability</button>
    </form>
</div>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('.timeslot-checkbox');
        checkboxes.forEach(function(checkbox) {
            checkbox.addEventListener('click', function() {
                this.value = this.checked ? 'Available' : 'Unavailable';
            });
        });
    });
</script>

{% endblock %}